import java.util.ArrayList;
import java.util.HashMap;

public class DN1 {
    public static void main(String[] args) {
        /*ArrArray tbl = new ArrArray();

        tbl.printOut();
        tbl.insert(7); tbl.insert(5); tbl.insert(9); tbl.insert(3); tbl.insert(15); tbl.insert(11);
        tbl.printOut();*/

        /*ArrArray tbl = new ArrArray();

        tbl.insert(7); tbl.insert(5); tbl.insert(9); tbl.insert(3); tbl.insert(15); tbl.insert(11);
        tbl.insert(17); tbl.delete(15); tbl.insert(11); tbl.delete(5);
        tbl.printOut();
        tbl.find(7); tbl.find(5); tbl.find(42);*/

        /*ArrArray tbl = new ArrArray();

        tbl.insert(7); tbl.insert(5); tbl.insert(9); tbl.insert(3); tbl.insert(15); tbl.insert(11);
        tbl.insert(17); tbl.delete(15); tbl.insert(11); tbl.delete(5); tbl.delete(11); tbl.insert(22);
        tbl.insert(33); tbl.insert(12); tbl.insert(9);
        tbl.printOut();
        tbl.find(11); tbl.find(9); tbl.find(42);*/

        /*ArrArray tbl = new ArrArray();

        tbl.insert(7); tbl.insert(5); tbl.insert(9);
        tbl.printOut();
        tbl.delete(7); tbl.delete(5); tbl.delete(9);
        tbl.printOut();*/

        /*ArrArray tbl = new ArrArray();
        tbl.insert(7); tbl.insert(5); tbl.insert(9); tbl.insert(3); tbl.insert(15); tbl.insert(11);
        tbl.insert(17); tbl.delete(15); tbl.insert(11); tbl.delete(5);
        tbl.delete(11);
        tbl.insert(22);
        tbl.insert(33);
        tbl.insert(12);
        tbl.insert(9);
        tbl.delete(7);
        tbl.insert(7);
        tbl.insert(18);
        tbl.insert(19);
        tbl.insert(99);
        tbl.insert(98);
        tbl.printOut();
        tbl.find(11); tbl.find(9); tbl.find(42);*/

        /*ArrArray tbl = new ArrArray();
        tbl.printOut();
        tbl.insert(7); tbl.insert(5); tbl.insert(9);
        tbl.printOut();
        tbl.delete(7); tbl.delete(5); tbl.delete(9);
        tbl.printOut();*/

        /*ArrArray tbl = new ArrArray();
        tbl.printOut();
        tbl.insert(7); tbl.insert(7); tbl.insert(7); tbl.insert(7);
        tbl.printOut();
        tbl.find(7);
        tbl.delete(7); tbl.delete(5); tbl.delete(7);
        tbl.printOut();
        tbl.delete(7); tbl.delete(7);
        tbl.printOut();*/

        /*ArrArray tbl = new ArrArray();
        tbl.printOut();

        tbl.insert(7);
        tbl.delete(7);

        tbl.insert(7);
        tbl.delete(7);

        tbl.insert(7);
        tbl.delete(7);

        tbl.insert(7);
        tbl.delete(7);

        tbl.insert(5);
        tbl.insert(5);
        tbl.delete(5);
        tbl.printOut();*/

        /*ArrArray tbl = new ArrArray();
        tbl.printOut();
        tbl.insert(3);
        tbl.insert(2);
        tbl.insert(1);
        tbl.printOut();
        tbl.delete(2);
        System.out.println("Deleted 2");
        tbl.printOut();
        System.out.println("Deleted 3");
        tbl.delete(3);
        tbl.printOut();
        System.out.println("Inserted 2");
        tbl.insert(2);
        tbl.printOut();
        System.out.println("Inserted 3");
        tbl.insert(3);
        tbl.printOut();
        System.out.println("Deleted 2");
        tbl.delete(2);
        tbl.printOut();
        System.out.println("Inserted 4");
        tbl.insert(4);
        tbl.printOut();
        System.out.println("Inserted 5");
        tbl.insert(5);
        tbl.printOut();
        System.out.println("Inserted 5");
        tbl.insert(5);
        tbl.printOut();
        System.out.println("Inserted 5");
        tbl.insert(5);
        tbl.printOut();
        System.out.println("Inserted 3");
        tbl.insert(3);
        tbl.printOut();
        System.out.println("Inserted 2");
        tbl.insert(2);
        tbl.printOut();
        System.out.println("deleted 1");
        tbl.delete(1);
        tbl.printOut();
        System.out.println("deleted 3");
        tbl.delete(3);
        tbl.printOut();
        System.out.println("deleted 2");
        tbl.delete(2);
        tbl.printOut();*/

        /*ArrArray tbl = new ArrArray();
        tbl.insert(5);
        tbl.printOut();
        System.out.println("-----");
        tbl.insert(3);
        tbl.printOut();
        System.out.println("-----");
        tbl.insert(1);
        tbl.printOut();
        System.out.println("-----");
        tbl.delete(5);
        tbl.printOut();
        System.out.println("-----");
        tbl.insert(2);
        tbl.printOut();
        System.out.println("-----");
        tbl.insert(4);
        tbl.printOut();
        System.out.println("-----");
        tbl.delete(3);
        tbl.printOut();*/

        /*ArrArray tbl = new ArrArray();
        tbl.delete(2);
        tbl.find(2);
        tbl.insert(5);
        tbl.printOut();
        System.out.println("-----");
        tbl.insert(7);
        tbl.printOut();
        System.out.println("-----");
        tbl.insert(1);
        tbl.printOut();
        System.out.println("-----");
        tbl.insert(9);
        tbl.printOut();
        System.out.println("-----");
        tbl.insert(2);
        tbl.printOut();
        System.out.println("-----");
        tbl.insert(11);
        tbl.printOut();
        System.out.println("-----");
        tbl.delete(5);
        tbl.printOut();
        System.out.println("-----");
        tbl.insert(1);
        tbl.printOut();
        System.out.println("-----");
        tbl.insert(3);
        tbl.printOut();
        System.out.println("-----");
        tbl.insert(5);
        tbl.printOut();
        System.out.println("-----");
        tbl.insert(14);
        tbl.printOut();
        System.out.println("-----");*/

        /*
        ArrArray tbl = new ArrArray();
        tbl.insert(5);
        tbl.printOut();
        System.out.println("-----");
        tbl.insert(1);
        tbl.printOut();
        System.out.println("-----");
        tbl.insert(2);
        tbl.printOut();
        System.out.println("-----");
        tbl.insert(3);
        tbl.printOut();
        System.out.println("-----");
        tbl.insert(4);
        tbl.printOut();
        System.out.println("-----");
        tbl.insert(9);
        tbl.printOut();
        System.out.println("-----");
        tbl.insert(10);
        tbl.printOut();
        System.out.println("-----");
        tbl.delete(10);
        tbl.printOut();
        System.out.println("-----");
        tbl.delete(2);
        tbl.printOut();
        System.out.println("-----");
        tbl.insert(4);
        tbl.printOut();
        System.out.println("-----");
        tbl.delete(4);
        tbl.delete(4);
        tbl.printOut();
        System.out.println("-----");
        tbl.delete(9);
        tbl.printOut();
        System.out.println("-----");
        tbl.insert(4);
        for (int i = 0; i < tbl.arr.size(); i++) {
            System.out.print("A"+i+": ");
            for (int j = 0; j < tbl.arr.get(i).length; j++) {
                System.out.print(tbl.arr.get(i)[j] + " ");
            }
            System.out.println();
        }
        System.out.println(tbl.ocC.toString());
        System.out.println(tbl.lazyDeleted);
        tbl.printOut();
        System.out.println("-----");
        tbl.delete(1);
        tbl.printOut();
        System.out.println("-----");
        tbl.delete(3);
        tbl.printOut();
        System.out.println("-----");
        tbl.delete(5);
        tbl.printOut();
        System.out.println("-----");
        */

        /*ArrArray tbl = new ArrArray();
        tbl.insert(1);
        tbl.printOut();
        System.out.println("-----");
        tbl.insert(2);
        tbl.printOut();
        System.out.println("-----");
        tbl.insert(3);
        tbl.printOut();
        System.out.println("-----");
        tbl.insert(4);
        tbl.printOut();
        System.out.println("-----");
        tbl.insert(5);
        tbl.printOut();
        System.out.println("-----");
        tbl.insert(6);
        tbl.printOut();
        System.out.println("-----");
        tbl.insert(7);
        tbl.printOut();
        System.out.println("-----");
        tbl.delete(5);
        tbl.printOut();
        System.out.println("-----");
        tbl.delete(7);
        tbl.printOut();
        System.out.println("-----");
        tbl.delete(1);
        tbl.printOut();
        System.out.println("-----");
        tbl.insert(1);
        tbl.printOut();
        System.out.println("-----");
        tbl.insert(7);
        tbl.printOut();
        System.out.println("-----");

        for (int i = 0; i < tbl.arr.size(); i++) {
            System.out.print("A"+i+": ");
            for (int j = 0; j < tbl.arr.get(i).length; j++) {
                System.out.print(tbl.arr.get(i)[j] + " ");
            }
            System.out.println();
        }
        System.out.println(tbl.ocC.toString());
        System.out.println(tbl.lazyDeleted);

        tbl.insert(8);
        tbl.printOut();
        System.out.println("-----");*/

        /*ArrArray tbl = new ArrArray();
        tbl.insert(4);
        tbl.printOut();
        System.out.println("-----");
        tbl.insert(1);
        tbl.printOut();
        System.out.println("-----");
        tbl.insert(2);
        tbl.printOut();
        System.out.println("-----");
        tbl.delete(1);
        tbl.printOut();
        System.out.println("-----");
        tbl.insert(1);
        tbl.printOut();
        System.out.println("-----");
        tbl.insert(26);
        tbl.printOut();
        System.out.println("-----");
        tbl.insert(5);
        tbl.printOut();
        System.out.println("-----");
        tbl.insert(6);
        tbl.printOut();
        System.out.println("-----");
        tbl.insert(3);
        tbl.printOut();
        System.out.println("-----");
        tbl.delete(6);
        tbl.printOut();
        System.out.println("-----");
        tbl.insert(12);
        tbl.printOut();
        System.out.println("-----");
        tbl.delete(5);
        tbl.printOut();
        System.out.println("-----");
        tbl.insert(11);
        tbl.printOut();
        System.out.println("-----");
        tbl.delete(2);
        tbl.printOut();
        System.out.println("-----");
        tbl.delete(4);
        tbl.printOut();
        System.out.println("-----");
        tbl.insert(13);
        tbl.printOut();
        System.out.println("-----");*/
    }
}

/**
 * Implementation of cascading array, using occurence counting.
 */
class ArrArray {
    final ArrayList<Integer[]> arr;
    final HashMap<Integer, Integer> ocC;
    final ArrayList<ArrayList<Integer>> lazyDeleted;

    ArrArray() {
        arr = new ArrayList<>();
        ocC = new HashMap<>();
        lazyDeleted = new ArrayList<>();
    }

    /**
     * Inserts a value into the array.
     *
     * @param e the value to insert
     */
    public void insert(int e) {
        for (int i = 0; i < arr.size(); i++) {
            if (arr.get(i) != null) {
                for (int j = 0; j < arr.get(i).length; j++) {
                    if (arr.get(i)[j] == e) {
                        if (ocC.get(e) > 0) {
                            ocC.put(e, ocC.get(e) + 1);
                            return;
                        }
                    }
                }
            }
        }

        boolean put = false;

        if (!ocC.containsKey(e)) {
            put = true;
            ocC.put(e, 1);
        }

        if (arr.size() == 0) {
            defaultInsert(e);

            if (!put) {
                if (ocC.containsKey(e)) {
                    ocC.put(e, ocC.get(e) + 1);
                } else {
                    ocC.put(e, 1);
                }
            }

            return;
        }

        for (int i = 0; i < arr.size(); i++) {
            if (arr.get(i) == null) {
                defaultInsert(e);
                break;
            } else if (isEmpty(i)) {
                defaultInsert(e);
                break;
            } else if (isFull(i)) {
                defaultInsert(e);
                break;
            } else if (hasSpace(i)) {
                deletedInsert(e, i);
                sort(arr.get(i));
                break;
            }
        }

        if (!put) {
            if (ocC.containsKey(e)) {
                ocC.put(e, ocC.get(e) + 1);
            } else {
                ocC.put(e, 1);
            }
        }
    }

    /**
     * Checks if element is in the array.
     *
     * @param e element to be found
     */
    public void find(int e) {
        if (ocC.containsKey(e)) {
            if (ocC.get(e) > 0) {
                System.out.println("true");
                return;
            }
        }
        System.out.println("false");
    }

    /**
     * Deletes a value from the array.
     *
     * @param e the value to delete
     */
    public void delete(int e) {
        if (ocC.containsKey(e)) {
            if (ocC.get(e) > 0) {
                ocC.put(e, ocC.get(e) - 1);
                for (int i = 0; i < arr.size(); i++) {
                    if (arr.get(i) != null) {
                        for (int j = 0; j < arr.get(i).length; j++) {
                            if (arr.get(i)[j] == e && ocC.get(e) == 0) {
                                lazyDeleted.get(i).add(e);
                            }
                        }
                    }
                }
                System.out.println("true");

                boolean allDeleted = true;

                for (Integer k : ocC.values()) {
                    if (k != 0) {
                        allDeleted = false;
                        break;
                    }
                }

                if (allDeleted) {
                    arr.set(arr.size() - 1, null);
                    arr.remove(arr.size() - 1);
                    lazyDeleted.remove(lazyDeleted.size() - 1);
                }

                boolean deleted = false;

                for (int i = arr.size() - 1; i > 0; i--) {
                    if (!(arr.get(i) == null) && !isEmpty(i) && !allDeleted(i)) {
                        break;
                    } else {
                        arr.remove(i);
                        lazyDeleted.remove(i);
                        deleted = true;
                    }
                }
                if (deleted) {
                    arr.add(null);
                    lazyDeleted.add(new ArrayList<>());
                }

                return;
            }
        }
        System.out.println("false");
    }

    /**
     * Prints the array.
     */
    public void printOut() {
        boolean allEmpty = true;

        for (int i = 0; i < arr.size(); i++) {
            if (arr.get(i) != null || !isEmpty(i)) {
                allEmpty = false;
                break;
            }
        }

        if (allEmpty) {
            System.out.println("empty");
            return;
        }

        allEmpty = true;

        for (Integer v : ocC.values()) {
            if (v != 0) {
                allEmpty = false;
                break;
            }
        }

        if (allEmpty) {
            System.out.println("empty");
            return;
        }

        for (int i = 0; i < arr.size(); i++) {
            System.out.print("A_" + i + ": ");
            if (arr.get(i) == null || isEmpty(i) || allDeleted(i)) {
                System.out.println("...");
            } else {
                for (int j = 0; j < arr.get(i).length; j++) {
                    if (ocC.get(arr.get(i)[j]) <= 0 || lazyDeleted.get(i).contains(arr.get(i)[j])) {
                        System.out.print("x");
                    } else {
                        System.out.print(arr.get(i)[j] + "/" + ocC.get(arr.get(i)[j]));
                    }

                    if (j != arr.get(i).length - 1) {
                        System.out.print(", ");
                    }
                }
                System.out.println();
            }
        }
    }

    /**
     * Sorts a static array.
     *
     * @param a array to be sorted
     */
    private void sort(Integer[] a) {
        int n = a.length;
        for (int i = 0; i < n - 1; i++) {
            for (int j = 0; j < n - i - 1; j++) {
                if (a[j] > a[j + 1]) {
                    int tmp = a[j];
                    a[j] = a[j + 1];
                    a[j + 1] = tmp;
                }
            }
        }
    }

    /**
     * Sorts an array list.
     *
     * @param a array list to be sorted
     */
    private void sort(ArrayList<Integer> a) {
        int n = a.size();
        for (int i = 0; i < n - 1; i++) {
            for (int j = 0; j < n - i - 1; j++) {
                if (a.get(j) > a.get(j + 1)) {
                    int tmp = a.get(j);
                    a.set(j, a.get(j + 1));
                    a.set(j + 1, tmp);
                }
            }
        }
    }

    /**
     * Checks if subarray has space (lazy deleted elements).
     *
     * @param index index of subarray
     * @return true if array has space, false otherwise
     */
    private boolean hasSpace(int index) {
        for (int i = 0; i < arr.get(index).length; i++) {
            if (ocC.get(arr.get(index)[i]) <= 0 || lazyDeleted.get(index).contains(arr.get(index)[i])) {
                return true;
            }
        }
        return false;
    }

    /**
     * Performs a default insert, which means inserting a value into the first empty array, merging arrays if necessary.
     *
     * @param e element to be inserted
     */
    private void defaultInsert(int e) {
        ArrayList<Integer> tmp = new ArrayList<>();
        tmp.add(e);

        for (int i = 0; i < arr.size(); i++) {
            if (arr.get(i) == null || isEmpty(i)) {

                Integer[] a = new Integer[tmp.size()];
                for (int j = 0; j < a.length; j++) {
                    a[j] = tmp.get(j);
                    if (lazyDeleted.get(i).contains(a[j])) {
                        lazyDeleted.get(i).remove(lazyDeleted.get(i).indexOf(a[j]));
                    }
                }
                arr.set(i, a);
                sort(arr.get(i));

                if (i > 0) {
                    for (int j = 0; j < i; j++) {
                        arr.set(j, null);
                        lazyDeleted.set(j, new ArrayList<>());
                    }
                }
                return;
            } else {
                for (int j = 0; j < arr.get(i).length; j++) {
                    tmp.add(arr.get(i)[j]);
                }
                sort(tmp);
            }
        }

        Integer[] a = new Integer[(int) Math.pow(2, arr.size())];

        for (int j = 0; j < tmp.size(); j++) {
            a[j] = tmp.get(j);
        }

        arr.add(a);
        lazyDeleted.add(new ArrayList<>());
        sort(arr.get(arr.size() - 1));

        if (arr.size() > 1) {
            for (int i = 0; i < arr.size() - 1; i++) {
                arr.set(i, null);
                lazyDeleted.set(i, new ArrayList<>());
            }
        }
    }

    /**
     * Performs an insertion by putting the element into the first lazy deleted place.
     *
     * @param e     element to be inserted
     * @param index index of subarray
     */
    private void deletedInsert(int e, int index) {
        for (int j = 0; j < arr.get(index).length; j++) {
            if (arr.get(index)[j] == e) {
                arr.get(index)[j] = e;

                if (lazyDeleted.get(index).contains(e)) {
                    int ind = -1;
                    for (int i = 0; i < lazyDeleted.get(index).size(); i++) {
                        if (lazyDeleted.get(index).get(i) == e) {
                            ind = i;
                            break;
                        }
                    }
                    lazyDeleted.get(index).remove(ind);
                }

                sort(arr.get(index));
                return;
            }
        }
        for (int j = 0; j < arr.get(index).length; j++) {
            if (ocC.get(arr.get(index)[j]) <= 0 || lazyDeleted.get(index).contains(arr.get(index)[j])) {
                arr.get(index)[j] = e;
                if (lazyDeleted.get(index).contains(e)) {
                    int ind = -1;
                    for (int i = 0; i < lazyDeleted.get(index).size(); i++) {
                        if (lazyDeleted.get(index).get(i) == e) {
                            ind = i;
                            break;
                        }
                    }
                    lazyDeleted.get(index).remove(ind);
                }
                return;
            }
        }
    }

    /**
     * Checks if the array is empty.
     *
     * @param index index of subarray
     * @return true if array is empty, false otherwise
     */
    private boolean isEmpty(int index) {
        boolean empty = true;
        if (arr.get(index) != null) {
            for (int i = 0; i < arr.get(index).length; i++) {
                if (ocC.get(arr.get(index)[i]) != 0) {
                    empty = false;
                    break;
                }
            }
        }
        return empty;
    }

    /**
     * Checks if the array is full.
     *
     * @param index index of subarray
     * @return true if array is full, false otherwise
     */
    private boolean isFull(int index) {
        if (index != arr.size() - 1) {
            return false;
        }
        boolean full = true;

        for (int i = 0; i < arr.get(index).length; i++) {
            if (ocC.get(arr.get(index)[i]) == 0 || lazyDeleted.get(index).contains(arr.get(index)[i])) {
                full = false;
                break;
            }
        }
        return full;
    }

    /**
     * Checks if all elements in subarray have been lazy deleted.
     *
     * @param index index of subarray
     * @return true if all elements have been lazy deleted, false otherwise
     */
    private boolean allDeleted(int index) {
        boolean deleted = true;

        for (int i = 0; i < arr.get(index).length; i++) {
            if (!lazyDeleted.get(index).contains(arr.get(index)[i])) {
                deleted = false;
                break;
            }
        }

        return deleted;
    }
}